# 5	Работа с метаданными 
## 5.1	Работа с пакетами изменений
[Роли для выполнения]
![image] (https://github.com/Alexandr2602/diplodoc-example/blob/main/photo_2025-04-23%2017.49.31.jpeg)
•	Менеджер пакетов изменений;
•	Контролер пакетов изменений;
•	Аудитор – для просмотра пакетов изменений.
Пакет изменений – это версия метаданных. Пользователь с ролью «Менеджер пакетов изменений» может просматривать только те пакеты изменений, которые он создал. В рамках пакета изменений происходит работа с метаданными и данными. Внесенные изменения доступны для остальных пользователей только после того, как пользователь с ролью контролер пакетов изменений согласовывает его. При согласовании пакета изменений контролер может просмотреть информацию о всех данных и всех изменениях, которые были выполнены в рамках этого пакета. 
---
### 5.1.1	ПРОСМОТР ПАКЕТОВ ИЗМЕНЕНИЙ
Для просмотра пакета изменений необходимо выбрать соответствующий раздел в левой части экрана. На экране (рис. 8) отображается список всех пакетов изменений, доступных для просмотра, в виде таблицы с полями - id, название, дата создания, дата изменения, автор, статус, действие. Реализована функция поиска по названию. При наведении курсора на строку с пакетом она подсвечивается. Для просмотра детальной информации о необходимо нажать на соответствующую строку. После этого в правой части экрана открывается экранная форма, содержащая разделы: 
•	изменения в пакете изменений;
•	классы;
•	атрибуты


***
Характеристики, которые отражаются, варьируются в зависимости от конкретного пакета, в разделе классы и атрибуты присутствуют описание параметров.
Раздел «Изменения» в пакете изменений представлен таблицей с полями: дата создания, автор, статус. Раздел классы содержит описание классов, созданных в рамках этого пакета. Раздел атрибуты содержит описание всех атрибутов, созданных в рамках этого пакета. 
Кнопка «Добавить» всегда активна для пользователей с ролью «Менеджер пакетов изменений». Если статус пакета «Черновик», то в столбце действия активны элементы «Удалить» и «Согласовать».
Внизу страницы реализована пагинация для перехода между страницами и возможность изменения количества отображаемых строк на экране («Отображать по: 10, 20, 50, 100»).

### 5.1.2	СОЗДАНИЕ НОВОГО ПАКЕТА ИЗМЕНЕНИЙ
Для создания нового пакета изменений необходимо авторизоваться под ролью «Менеджер пакетов изменений» и нажать кнопку «Добавить» (рис. 9).

В появившемся всплывающем окне необходимо задать название нового пакета изменений. Для продолжения работы необходимо нажать кнопку «Сохранить». Отменить создание нового пакета до его первого сохранения можно, нажав кнопку «Отмена». 
После нажатия на кнопку «Сохранить» новый пакет появляется в списке всех пакетов изменений. На кнопке «Сохранить» реализована проверка на уникальность для названия, если имя новой пакета не уникально, то в правом нижнем углу появляется сообщение «Пакет изменений с таким именем уже существует, имя должно быть уникальным». При создании нового пакета значение поля в панели состояния «Текущий пакет изменений» автоматически заменяется на созданный.
Пакету присваивается статус «Черновик». Все изменения в рамках пакета изменений вносятся только в статусе «Черновик». После создания в столбце действия отражаются элементы интерфейса, отвечающие за удаление и согласование пакета изменений

### 5.1.3	СОГЛАСОВАНИЕ ПАКЕТА ИЗМЕНЕНИЙ
После внесения всех изменений, которые доступны менеджеру в рамках ролевой модели, пакет изменений отправляется на согласование. Для этого на ЭФ «Создание пакета изменений» (рис. 8) в столбце действия необходимо выбрать элемент интерфейса «Согласовать». Появляется всплывающее окно с сообщением «Вы действительно хотите отправить пакет изменений на согласование?». Для согласования необходимо нажать кнопку «На согласование» или отменить действие, нажав на кнопку «Отмена». 
При согласовании пакета пользователю с ролью «Контролер пакетов изменений» доступна возможность просмотра всех изменений, выполненных в рамках пакета. Для этого необходимо нажать на строку с соответствующей пакетом. 
После отправки пакета изменений на согласование в столбце «Статус» значение меняется на «На согласовании». А в столбце действия появляются элементы интерфейса:
«Внедрить» - позволяющий пользователю с ролью «Контролер пакетов изменений» внедрить пакет. При нажатии на элемент интерфейса «Внедрить» во всплывающем окне появляется сообщение «Вы действительно хотите принять пакет изменений?». Для внедрения необходимо нажать кнопку «Принять» или отменить действие, нажав на кнопку «Отмена». После принятия у пакета изменений будет статус «Внедрен» и все изменения, сделанные в рамках этого пакета, применяются на проде и становятся доступны всем пользователям Системы, а также Системам-потребителям.
«Вернуть» - позволяющий пользователю с ролью «Контролер пакетов изменений» отправить пакет на доработку. Во всплывающем окне появляется сообщение «Вы действительно хотите отправить пакет изменений на доработку?». Для отправления необходимо нажать кнопку «На доработку» или отменить действие, нажав на кнопку «Отмена». При отправке пакета на доработку он меняет статус на «Черновик»

### 5.1.4	ОГРАНИЧЕНИЯ И ДОПУЩЕНИЯ
Контроль за содержанием метаданных должен быть на стороне менеджера пакетов изменений. Продуктовая фабрика позволяет нескольким пользователям одновременно вносить изменения в метаданные. Пока пакет не согласован, пользователь не может отследить изменения, внесенные ранее другими пользователями. 

### 5.1.5	УДАЛЕНИЕ ПАКЕТА ИЗМЕНЕНИЙ
Для удаления пакета изменений необходимо авторизоваться под ролью «Менеджер пакетов изменений». Удалить можно пакет, который находится в статусе «Черновик» или «На согласовании». Для этого в столбце «Действия» необходимо выбрать элемент интерфейса, отвечающий за удаление пакетов. После этого появляется всплывающее окно, подтверждающее операцию.
![image](https://github.com/user-attachments/assets/b5389c13-c47c-4c70-a87e-35e89a75f4b4)
